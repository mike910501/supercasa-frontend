{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,requireAdmin=false}=_ref;const token=localStorage.getItem('token');const user=localStorage.getItem('user');// Si no hay token, redirigir al login\nif(!token||!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}try{const userData=JSON.parse(user);// Si se requiere admin y el usuario no es admin\nif(requireAdmin&&userData.rol!=='admin'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white p-8 rounded-2xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDEAB\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600 mb-4\",children:\"Acceso Denegado\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"No tienes permisos de administrador para acceder a esta secci\\xF3n.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',className:\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:\"\\uD83D\\uDECD\\uFE0F Ir a la Tienda\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/';},className:\"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors\",children:\"Cambiar Usuario\"})]})]})});}return children;}catch(error){// Si hay error parseando el usuario, limpiar y redirigir\nlocalStorage.removeItem('token');localStorage.removeItem('user');return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}}","map":{"version":3,"names":["React","Navigate","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","requireAdmin","token","localStorage","getItem","user","to","userData","JSON","parse","rol","className","onClick","window","location","href","removeItem","error"],"sources":["C:/Users/mikeh/Documents/supercasa-admin/supercasa-admin/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nexport default function ProtectedRoute({ children, requireAdmin = false }) {\r\n  const token = localStorage.getItem('token');\r\n  const user = localStorage.getItem('user');\r\n\r\n  // Si no hay token, redirigir al login\r\n  if (!token || !user) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  try {\r\n    const userData = JSON.parse(user);\r\n    \r\n    // Si se requiere admin y el usuario no es admin\r\n    if (requireAdmin && userData.rol !== 'admin') {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n          <div className=\"text-center bg-white p-8 rounded-2xl shadow-lg\">\r\n            <div className=\"text-6xl mb-4\">üö´</div>\r\n            <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Acceso Denegado</h2>\r\n            <p className=\"text-gray-600 mb-6\">No tienes permisos de administrador para acceder a esta secci√≥n.</p>\r\n            <div className=\"space-x-4\">\r\n              <button \r\n                onClick={() => window.location.href = '/'}\r\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                üõçÔ∏è Ir a la Tienda\r\n              </button>\r\n              <button \r\n                onClick={() => {\r\n                  localStorage.removeItem('token');\r\n                  localStorage.removeItem('user');\r\n                  window.location.href = '/';\r\n                }}\r\n                className=\"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors\"\r\n              >\r\n                Cambiar Usuario\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return children;\r\n  } catch (error) {\r\n    // Si hay error parseando el usuario, limpiar y redirigir\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAqC,IAApC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,KAAM,CAAC,CAAAF,IAAA,CACvE,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEzC;AACA,GAAI,CAACF,KAAK,EAAI,CAACG,IAAI,CAAE,CACnB,mBAAOV,IAAA,CAACF,QAAQ,EAACa,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CAEA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC,CAEjC;AACA,GAAIJ,YAAY,EAAIM,QAAQ,CAACG,GAAG,GAAK,OAAO,CAAE,CAC5C,mBACEf,IAAA,QAAKgB,SAAS,CAAC,2DAA2D,CAAAX,QAAA,cACxEH,KAAA,QAAKc,SAAS,CAAC,gDAAgD,CAAAX,QAAA,eAC7DL,IAAA,QAAKgB,SAAS,CAAC,eAAe,CAAAX,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCL,IAAA,OAAIgB,SAAS,CAAC,sCAAsC,CAAAX,QAAA,CAAC,iBAAe,CAAI,CAAC,cACzEL,IAAA,MAAGgB,SAAS,CAAC,oBAAoB,CAAAX,QAAA,CAAC,qEAAgE,CAAG,CAAC,cACtGH,KAAA,QAAKc,SAAS,CAAC,WAAW,CAAAX,QAAA,eACxBL,IAAA,WACEiB,OAAO,CAAEA,CAAA,GAAMC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAI,CAC1CJ,SAAS,CAAC,iFAAiF,CAAAX,QAAA,CAC5F,mCAED,CAAQ,CAAC,cACTL,IAAA,WACEiB,OAAO,CAAEA,CAAA,GAAM,CACbT,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAChCb,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC,CAC/BH,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC5B,CAAE,CACFJ,SAAS,CAAC,iFAAiF,CAAAX,QAAA,CAC5F,iBAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,MAAO,CAAAA,QAAQ,CACjB,CAAE,MAAOiB,KAAK,CAAE,CACd;AACAd,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAChCb,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC,CAC/B,mBAAOrB,IAAA,CAACF,QAAQ,EAACa,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}