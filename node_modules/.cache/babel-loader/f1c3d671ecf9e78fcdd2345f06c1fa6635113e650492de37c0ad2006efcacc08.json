{"ast":null,"code":"import _objectSpread from\"C:/Users/mikeh/Documents/supercasa-admin/supercasa-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import API_URL from'../config/api';// ⚡ AGREGADO: Import de configuración de API\n// Aplicación principal que maneja autenticación\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[isLoading,setIsLoading]=useState(true);// Verificar si hay sesión guardada al cargar\nuseEffect(()=>{const savedToken=localStorage.getItem('token');const savedUser=localStorage.getItem('user');if(savedToken&&savedUser){try{setToken(savedToken);setUser(JSON.parse(savedUser));console.log('Sesión restaurada para:',JSON.parse(savedUser).nombre);}catch(error){console.error('Error parsing saved user:',error);localStorage.removeItem('token');localStorage.removeItem('user');}}setIsLoading(false);},[]);const handleLogin=(userData,userToken)=>{console.log('Login exitoso, configurando usuario:',userData.nombre);setUser(userData);setToken(userToken);localStorage.setItem('token',userToken);localStorage.setItem('user',JSON.stringify(userData));};const handleLogout=()=>{setUser(null);setToken(null);localStorage.removeItem('token');localStorage.removeItem('user');};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600\"})});}// Si no hay usuario, mostrar autenticación\nif(!user||!token){return/*#__PURE__*/_jsx(AuthContainer,{onAuth:handleLogin});}// Si hay usuario, mostrar la tienda\nreturn/*#__PURE__*/_jsx(Store,{user:user,token:token,onLogout:handleLogout});}// Componente de autenticación\nfunction AuthContainer(_ref){let{onAuth}=_ref;const[showLogin,setShowLogin]=useState(true);return showLogin?/*#__PURE__*/_jsx(LoginForm,{onLogin:onAuth,onSwitchToRegister:()=>setShowLogin(false)}):/*#__PURE__*/_jsx(RegisterForm,{onRegister:onAuth,onSwitchToLogin:()=>setShowLogin(true)});}// Componente de Login\nfunction LoginForm(_ref2){let{onLogin,onSwitchToRegister}=_ref2;const[formData,setFormData]=useState({email:'',password:''});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async()=>{if(!formData.email||!formData.password){setError('Por favor completa todos los campos');return;}setIsLoading(true);setError('');try{// ✅ CORREGIDO: URL dinámica con template literals correctos\nconst response=await fetch(\"\".concat(API_URL,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(response.ok){onLogin(data.user,data.token);}else{setError(data.error||'Error al iniciar sesión');}}catch(error){setError('Error de conexión. Asegúrate de que el servidor esté corriendo.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl inline-block mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"Supercasa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Conjunto Residencial\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"tu@email.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:formData.password,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value})),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isLoading,className:\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50\",children:isLoading?'Iniciando sesión...':'Iniciar Sesión'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"\\xBFNo tienes cuenta?\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:onSwitchToRegister,className:\"text-blue-600 hover:text-blue-700 font-medium\",children:\"Reg\\xEDstrate aqu\\xED\"})]})})]})});}// Componente de Registro para Conjunto Residencial\nfunction RegisterForm(_ref3){let{onRegister,onSwitchToLogin}=_ref3;const[formData,setFormData]=useState({nombre:'',email:'',password:'',confirmPassword:'',telefono:'',telefono_alternativo:'',torre:'',piso:'',apartamento:'',notas_entrega:''});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async()=>{if(!formData.nombre||!formData.email||!formData.password||!formData.torre||!formData.piso||!formData.apartamento){setError('Por favor completa todos los campos obligatorios');return;}if(formData.password!==formData.confirmPassword){setError('Las contraseñas no coinciden');return;}if(formData.password.length<6){setError('La contraseña debe tener al menos 6 caracteres');return;}if(!['1','2','3','4'].includes(formData.torre)){setError('Selecciona una torre válida');return;}if(formData.piso<1||formData.piso>30){setError('El piso debe estar entre 1 y 30');return;}setIsLoading(true);setError('');try{// ✅ CORREGIDO: URL dinámica con template literals correctos\nconst response=await fetch(\"\".concat(API_URL,\"/auth/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(response.ok){onRegister(data.user,data.token);}else{setError(data.error||'Error al registrarse');}}catch(error){setError('Error de conexión. Asegúrate de que el servidor esté corriendo.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-green-500 to-blue-600 text-white p-3 rounded-xl inline-block mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"Registro Conjunto Residencial\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\xDAnete a Supercasa - Solo para residentes\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\",children:\"\\uD83D\\uDCCB Informaci\\xF3n Personal\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Nombre completo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.nombre,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{nombre:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"Tu nombre completo\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"tu@email.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:formData.password,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Confirmar contrase\\xF1a *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:formData.confirmPassword,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{confirmPassword:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 mt-4\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\",children:\"\\uD83D\\uDCDE Contacto\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Tel\\xE9fono principal *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.telefono,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{telefono:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"300-123-4567\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Tel\\xE9fono alternativo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.telefono_alternativo,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{telefono_alternativo:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"310-123-4567\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 mt-4\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\",children:\"\\uD83C\\uDFE2 Ubicaci\\xF3n en el Conjunto\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Torre *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.torre,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{torre:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona tu torre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Torre 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Torre 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Torre 3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Torre 4\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Piso *\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.piso,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{piso:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona el piso\"}),Array.from({length:30},(_,i)=>i+1).map(piso=>/*#__PURE__*/_jsxs(\"option\",{value:piso,children:[\"Piso \",piso]},piso))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Apartamento *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.apartamento,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{apartamento:e.target.value.toUpperCase()})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"Ej: 101, 102A, 103B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-1\",children:\"Notas para entrega\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.notas_entrega,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{notas_entrega:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"Ej: Timbre roto, llamar al celular. Porter\\xEDa principal.\",rows:\"2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-blue-600 mt-1 mr-2 flex-shrink-0\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:\"Solo para residentes del conjunto\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Verificaremos tu direcci\\xF3n antes de aprobar el registro. Solo un registro por apartamento.\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isLoading,className:\"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50\",children:isLoading?'Registrando...':'Registrarse en Supercasa'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm\",children:[\"\\xBFYa tienes cuenta?\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:onSwitchToLogin,className:\"text-blue-600 hover:text-blue-700 font-medium\",children:\"Inicia sesi\\xF3n\"})]})})]})});}// Componente principal de la tienda\nfunction Store(_ref4){let{user,token,onLogout}=_ref4;const[productos,setProductos]=useState([]);const[carrito,setCarrito]=useState([]);const[categoriaSeleccionada,setCategoriaSeleccionada]=useState('');const[showCart,setShowCart]=useState(false);const[showCheckout,setShowCheckout]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[isLoading,setIsLoading]=useState(true);// Datos de entrega específicos para conjunto residencial\nconst[deliveryData,setDeliveryData]=useState({torre_entrega:(user===null||user===void 0?void 0:user.torre)||'1',piso_entrega:(user===null||user===void 0?void 0:user.piso)||'',apartamento_entrega:(user===null||user===void 0?void 0:user.apartamento)||'',instrucciones_entrega:(user===null||user===void 0?void 0:user.notas_entrega)||'',horario_preferido:'',telefono_contacto:(user===null||user===void 0?void 0:user.telefono)||''});// Actualizar deliveryData cuando user cambie\nuseEffect(()=>{if(user){setDeliveryData({torre_entrega:user.torre||'1',piso_entrega:user.piso||'',apartamento_entrega:user.apartamento||'',instrucciones_entrega:user.notas_entrega||'',horario_preferido:'',telefono_contacto:user.telefono||''});}},[user]);// Cargar productos desde la base de datos\nuseEffect(()=>{setIsLoading(true);// ✅ CORREGIDO: URL dinámica con template literals correctos\nfetch(\"\".concat(API_URL,\"/productos\")).then(res=>res.json()).then(data=>{console.log(\"Productos cargados desde la base de datos:\",data);setProductos(data);setIsLoading(false);}).catch(error=>{console.error('Error al cargar los productos:',error);// Fallback con productos de ejemplo si la API no está disponible\nconst productosEjemplo=[{id:1,nombre:'Arroz Diana 500g',precio:3500,categoria:'Despensa',imagen:'https://via.placeholder.com/200x200?text=Arroz',stock:50},{id:2,nombre:'Leche Alquería 1L',precio:4200,categoria:'Lacteos',imagen:'https://via.placeholder.com/200x200?text=Leche',stock:30},{id:3,nombre:'Pan Tajado',precio:2800,categoria:'Panadería',imagen:'https://via.placeholder.com/200x200?text=Pan',stock:25},{id:4,nombre:'Huevos AA x30',precio:8500,categoria:'Proteínas',imagen:'https://via.placeholder.com/200x200?text=Huevos',stock:40},{id:5,nombre:'Aceite de Cocina 500ml',precio:6500,categoria:'Despensa',imagen:'https://via.placeholder.com/200x200?text=Aceite',stock:35}];setProductos(productosEjemplo);setIsLoading(false);});},[]);// Filtrar productos\nconst productosFiltrados=productos.filter(producto=>{const matchesCategory=categoriaSeleccionada?producto.categoria===categoriaSeleccionada:true;const matchesSearch=producto.nombre.toLowerCase().includes(searchTerm.toLowerCase());return matchesCategory&&matchesSearch;});const categorias=[...new Set(productos.map(producto=>producto.categoria))];const agregarAlCarrito=producto=>{const productoExistente=carrito.find(item=>item.id===producto.id);if(productoExistente){setCarrito(carrito.map(item=>item.id===producto.id?_objectSpread(_objectSpread({},item),{},{cantidad:item.cantidad+1}):item));}else{setCarrito([...carrito,_objectSpread(_objectSpread({},producto),{},{cantidad:1})]);}};const eliminarDelCarrito=productoId=>{const productoExistente=carrito.find(item=>item.id===productoId);if(productoExistente.cantidad>1){setCarrito(carrito.map(item=>item.id===productoId?_objectSpread(_objectSpread({},item),{},{cantidad:item.cantidad-1}):item));}else{setCarrito(carrito.filter(item=>item.id!==productoId));}};const finalizarCompra=async()=>{if(carrito.length===0){alert('El carrito está vacío');return;}setShowCheckout(true);};const confirmarPedido=async()=>{const totalPedido=carrito.reduce((acc,item)=>acc+Number(item.precio)*item.cantidad,0);// Debug: Mostrar datos de entrega\nconsole.log('Datos de entrega:',deliveryData);// Validación mejorada\nif(!deliveryData.torre_entrega){alert('Por favor selecciona la torre de entrega');return;}if(!deliveryData.piso_entrega){alert('Por favor ingresa el piso de entrega');return;}if(!deliveryData.apartamento_entrega){alert('Por favor ingresa el apartamento de entrega');return;}try{// ✅ CORREGIDO: URL dinámica con template literals correctos\nconst res=await fetch(\"\".concat(API_URL,\"/orders\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(_objectSpread({productos:carrito,total:totalPedido},deliveryData))});if(res.ok){const data=await res.json();alert(\"\\u2705 Pedido realizado correctamente\\n\\uD83D\\uDCCD Entrega: Torre \".concat(deliveryData.torre_entrega,\", Piso \").concat(deliveryData.piso_entrega,\", Apt \").concat(deliveryData.apartamento_entrega,\"\\n\\uD83D\\uDCF1 Te contactaremos para coordinar la entrega\"));setCarrito([]);setShowCart(false);setShowCheckout(false);}else{const err=await res.json();alert('❌ Error al realizar el pedido: '+err.error);}}catch(error){alert('❌ Error de red al realizar el pedido');console.error(error);}};const total=carrito.reduce((acc,item)=>acc+item.precio*item.cantidad,0);const totalItems=carrito.reduce((acc,item)=>acc+item.cantidad,0);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600 text-lg\",children:\"Cargando productos...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-lg sticky top-0 z-40\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\",children:\"Supercasa\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:user.direccion||\"Torre \".concat(user.torre,\", Piso \").concat(user.piso,\", Apt \").concat(user.apartamento)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"Hola, \",user.nombre]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCart(true),className:\"relative bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\"})}),totalItems>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center\",children:totalItems})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,className:\"text-gray-600 hover:text-gray-800 p-2 rounded-xl hover:bg-gray-100 transition-all\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 01-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z\",clipRule:\"evenodd\"})})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-lg p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar productos...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})}),/*#__PURE__*/_jsxs(\"select\",{value:categoriaSeleccionada,onChange:e=>setCategoriaSeleccionada(e.target.value),className:\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Todas las categor\\xEDas\"}),categorias.map(categoria=>/*#__PURE__*/_jsx(\"option\",{value:categoria,children:categoria},categoria))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:productosFiltrados.map(producto=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all transform hover:scale-105\",children:[/*#__PURE__*/_jsx(\"img\",{src:producto.imagen,alt:producto.nombre,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:producto.nombre}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-2\",children:producto.categoria}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-blue-600\",children:[\"$\",producto.precio.toLocaleString()]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Stock: \",producto.stock]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>agregarAlCarrito(producto),disabled:producto.stock===0,className:\"w-full mt-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\",children:producto.stock===0?'Sin stock':'Agregar al carrito'})]})]},producto.id))}),productosFiltrados.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-600 mb-2\",children:\"No se encontraron productos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Intenta con otros t\\xE9rminos de b\\xFAsqueda o categor\\xEDas\"})]})]}),showCart&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Tu Carrito\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCart(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:carrito.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Tu carrito est\\xE1 vac\\xEDo\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[carrito.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-4 border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imagen,alt:item.nombre,className:\"w-16 h-16 object-cover rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800\",children:item.nombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"$\",item.precio.toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarDelCarrito(item.id),className:\"bg-red-100 text-red-600 p-1 rounded-lg hover:bg-red-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gray-100 rounded-lg\",children:item.cantidad}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>agregarAlCarrito(item),className:\"bg-blue-100 text-blue-600 p-1 rounded-lg hover:bg-blue-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\",clipRule:\"evenodd\"})})})]})]},item.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold text-gray-800\",children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-blue-600\",children:[\"$\",total.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:finalizarCompra,className:\"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all\",children:\"Finalizar Compra\"})]})]})})]})}),showCheckout&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"Confirmar Pedido\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCheckout(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\uD83D\\uDCCD Datos de Entrega\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Torre\"}),/*#__PURE__*/_jsxs(\"select\",{value:deliveryData.torre_entrega,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{torre_entrega:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Torre 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Torre 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Torre 3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Torre 4\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Piso\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:deliveryData.piso_entrega,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{piso_entrega:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\",min:\"1\",max:\"30\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Apartamento\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryData.apartamento_entrega,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{apartamento_entrega:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:deliveryData.telefono_contacto,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{telefono_contacto:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Horario Preferido\"}),/*#__PURE__*/_jsxs(\"select\",{value:deliveryData.horario_preferido,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{horario_preferido:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona horario\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ma\\xF1ana\",children:\"Ma\\xF1ana (8:00 AM - 12:00 PM)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tarde\",children:\"Tarde (12:00 PM - 6:00 PM)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"noche\",children:\"Noche (6:00 PM - 9:00 PM)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2\",children:\"Instrucciones de Entrega\"}),/*#__PURE__*/_jsx(\"textarea\",{value:deliveryData.instrucciones_entrega,onChange:e=>setDeliveryData(_objectSpread(_objectSpread({},deliveryData),{},{instrucciones_entrega:e.target.value})),className:\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Ej: Llamar al celular, timbre no funciona\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"\\uD83D\\uDCE6 Resumen del Pedido\"}),carrito.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.nombre,\" x\",item.cantidad]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",(item.precio*item.cantidad).toLocaleString()]})]},item.id)),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 mt-4 pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center text-xl font-bold\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600\",children:[\"$\",total.toLocaleString()]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmarPedido,className:\"w-full mt-6 bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all\",children:\"Confirmar Pedido\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('DEBUG - Datos de entrega:',deliveryData);console.log('DEBUG - Usuario:',user);alert(\"DEBUG:\\nTorre: \\\"\".concat(deliveryData.torre_entrega,\"\\\"\\nPiso: \\\"\").concat(deliveryData.piso_entrega,\"\\\"\\nApt: \\\"\").concat(deliveryData.apartamento_entrega,\"\\\"\\nTel\\xE9fono: \\\"\").concat(deliveryData.telefono_contacto,\"\\\"\"));},className:\"w-full mt-2 bg-gray-500 text-white py-2 rounded-xl hover:bg-gray-600 transition-all text-sm\",children:\"\\uD83D\\uDD0D Debug - Ver Datos\"})]})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","API_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","setUser","token","setToken","isLoading","setIsLoading","savedToken","localStorage","getItem","savedUser","JSON","parse","console","log","nombre","error","removeItem","handleLogin","userData","userToken","setItem","stringify","handleLogout","className","children","AuthContainer","onAuth","Store","onLogout","_ref","showLogin","setShowLogin","LoginForm","onLogin","onSwitchToRegister","RegisterForm","onRegister","onSwitchToLogin","_ref2","formData","setFormData","email","password","setError","handleSubmit","response","fetch","concat","method","headers","body","data","json","ok","fill","viewBox","d","type","value","onChange","e","_objectSpread","target","placeholder","onClick","disabled","_ref3","confirmPassword","telefono","telefono_alternativo","torre","piso","apartamento","notas_entrega","length","includes","Array","from","_","i","map","toUpperCase","rows","fillRule","clipRule","_ref4","productos","setProductos","carrito","setCarrito","categoriaSeleccionada","setCategoriaSeleccionada","showCart","setShowCart","showCheckout","setShowCheckout","searchTerm","setSearchTerm","deliveryData","setDeliveryData","torre_entrega","piso_entrega","apartamento_entrega","instrucciones_entrega","horario_preferido","telefono_contacto","then","res","catch","productosEjemplo","id","precio","categoria","imagen","stock","productosFiltrados","filter","producto","matchesCategory","matchesSearch","toLowerCase","categorias","Set","agregarAlCarrito","productoExistente","find","item","cantidad","eliminarDelCarrito","productoId","finalizarCompra","alert","confirmarPedido","totalPedido","reduce","acc","Number","total","err","totalItems","direccion","src","alt","toLocaleString","min","max"],"sources":["C:/Users/mikeh/Documents/supercasa-admin/supercasa-admin/src/pages/Store.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport API_URL from '../config/api'; // ⚡ AGREGADO: Import de configuración de API\r\n\r\n// Aplicación principal que maneja autenticación\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Verificar si hay sesión guardada al cargar\r\n  useEffect(() => {\r\n    const savedToken = localStorage.getItem('token');\r\n    const savedUser = localStorage.getItem('user');\r\n    \r\n    if (savedToken && savedUser) {\r\n      try {\r\n        setToken(savedToken);\r\n        setUser(JSON.parse(savedUser));\r\n        console.log('Sesión restaurada para:', JSON.parse(savedUser).nombre);\r\n      } catch (error) {\r\n        console.error('Error parsing saved user:', error);\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n      }\r\n    }\r\n    setIsLoading(false);\r\n  }, []);\r\n\r\n  const handleLogin = (userData, userToken) => {\r\n    console.log('Login exitoso, configurando usuario:', userData.nombre);\r\n    setUser(userData);\r\n    setToken(userToken);\r\n    \r\n    localStorage.setItem('token', userToken);\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    setUser(null);\r\n    setToken(null);\r\n    \r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si no hay usuario, mostrar autenticación\r\n  if (!user || !token) {\r\n    return <AuthContainer onAuth={handleLogin} />;\r\n  }\r\n\r\n  // Si hay usuario, mostrar la tienda\r\n  return <Store user={user} token={token} onLogout={handleLogout} />;\r\n}\r\n\r\n// Componente de autenticación\r\nfunction AuthContainer({ onAuth }) {\r\n  const [showLogin, setShowLogin] = useState(true);\r\n\r\n  return showLogin ? (\r\n    <LoginForm \r\n      onLogin={onAuth}\r\n      onSwitchToRegister={() => setShowLogin(false)}\r\n    />\r\n  ) : (\r\n    <RegisterForm \r\n      onRegister={onAuth}\r\n      onSwitchToLogin={() => setShowLogin(true)}\r\n    />\r\n  );\r\n}\r\n\r\n// Componente de Login\r\nfunction LoginForm({ onLogin, onSwitchToRegister }) {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.email || !formData.password) {\r\n      setError('Por favor completa todos los campos');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // ✅ CORREGIDO: URL dinámica con template literals correctos\r\n      const response = await fetch(`${API_URL}/auth/login`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        onLogin(data.user, data.token);\r\n      } else {\r\n        setError(data.error || 'Error al iniciar sesión');\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión. Asegúrate de que el servidor esté corriendo.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md\">\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl inline-block mb-4\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"/>\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Supercasa</h2>\r\n          <p className=\"text-gray-600\">Conjunto Residencial</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-2\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(e) => setFormData({...formData, email: e.target.value})}\r\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"tu@email.com\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-2\">Contraseña</label>\r\n            <input\r\n              type=\"password\"\r\n              value={formData.password}\r\n              onChange={(e) => setFormData({...formData, password: e.target.value})}\r\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"••••••••\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isLoading}\r\n            className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50\"\r\n          >\r\n            {isLoading ? 'Iniciando sesión...' : 'Iniciar Sesión'}\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-gray-600\">\r\n            ¿No tienes cuenta?{' '}\r\n            <button\r\n              onClick={onSwitchToRegister}\r\n              className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n            >\r\n              Regístrate aquí\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Componente de Registro para Conjunto Residencial\r\nfunction RegisterForm({ onRegister, onSwitchToLogin }) {\r\n  const [formData, setFormData] = useState({\r\n    nombre: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    telefono: '',\r\n    telefono_alternativo: '',\r\n    torre: '',\r\n    piso: '',\r\n    apartamento: '',\r\n    notas_entrega: ''\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async () => {\r\n    if (!formData.nombre || !formData.email || !formData.password || !formData.torre || !formData.piso || !formData.apartamento) {\r\n      setError('Por favor completa todos los campos obligatorios');\r\n      return;\r\n    }\r\n\r\n    if (formData.password !== formData.confirmPassword) {\r\n      setError('Las contraseñas no coinciden');\r\n      return;\r\n    }\r\n\r\n    if (formData.password.length < 6) {\r\n      setError('La contraseña debe tener al menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    if (!['1', '2', '3', '4'].includes(formData.torre)) {\r\n      setError('Selecciona una torre válida');\r\n      return;\r\n    }\r\n\r\n    if (formData.piso < 1 || formData.piso > 30) {\r\n      setError('El piso debe estar entre 1 y 30');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // ✅ CORREGIDO: URL dinámica con template literals correctos\r\n      const response = await fetch(`${API_URL}/auth/register`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        onRegister(data.user, data.token);\r\n      } else {\r\n        setError(data.error || 'Error al registrarse');\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión. Asegúrate de que el servidor esté corriendo.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"text-center mb-6\">\r\n          <div className=\"bg-gradient-to-r from-green-500 to-blue-600 text-white p-3 rounded-xl inline-block mb-4\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"/>\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Registro Conjunto Residencial</h2>\r\n          <p className=\"text-gray-600\">Únete a Supercasa - Solo para residentes</p>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {/* Información personal */}\r\n          <div className=\"md:col-span-2\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\">📋 Información Personal</h3>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Nombre completo *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.nombre}\r\n              onChange={(e) => setFormData({...formData, nombre: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"Tu nombre completo\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Email *</label>\r\n            <input\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(e) => setFormData({...formData, email: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"tu@email.com\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Contraseña *</label>\r\n            <input\r\n              type=\"password\"\r\n              value={formData.password}\r\n              onChange={(e) => setFormData({...formData, password: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"••••••••\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Confirmar contraseña *</label>\r\n            <input\r\n              type=\"password\"\r\n              value={formData.confirmPassword}\r\n              onChange={(e) => setFormData({...formData, confirmPassword: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"••••••••\"\r\n            />\r\n          </div>\r\n\r\n          {/* Información de contacto */}\r\n          <div className=\"md:col-span-2 mt-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\">📞 Contacto</h3>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Teléfono principal *</label>\r\n            <input\r\n              type=\"tel\"\r\n              value={formData.telefono}\r\n              onChange={(e) => setFormData({...formData, telefono: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"300-123-4567\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Teléfono alternativo</label>\r\n            <input\r\n              type=\"tel\"\r\n              value={formData.telefono_alternativo}\r\n              onChange={(e) => setFormData({...formData, telefono_alternativo: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"310-123-4567\"\r\n            />\r\n          </div>\r\n\r\n          {/* Información residencial */}\r\n          <div className=\"md:col-span-2 mt-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-3 pb-2 border-b\">🏢 Ubicación en el Conjunto</h3>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Torre *</label>\r\n            <select\r\n              value={formData.torre}\r\n              onChange={(e) => setFormData({...formData, torre: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">Selecciona tu torre</option>\r\n              <option value=\"1\">Torre 1</option>\r\n              <option value=\"2\">Torre 2</option>\r\n              <option value=\"3\">Torre 3</option>\r\n              <option value=\"4\">Torre 4</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Piso *</label>\r\n            <select\r\n              value={formData.piso}\r\n              onChange={(e) => setFormData({...formData, piso: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">Selecciona el piso</option>\r\n              {Array.from({length: 30}, (_, i) => i + 1).map(piso => (\r\n                <option key={piso} value={piso}>Piso {piso}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Apartamento *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.apartamento}\r\n              onChange={(e) => setFormData({...formData, apartamento: e.target.value.toUpperCase()})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"Ej: 101, 102A, 103B\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-gray-700 text-sm font-medium mb-1\">Notas para entrega</label>\r\n            <textarea\r\n              value={formData.notas_entrega}\r\n              onChange={(e) => setFormData({...formData, notas_entrega: e.target.value})}\r\n              className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              placeholder=\"Ej: Timbre roto, llamar al celular. Portería principal.\"\r\n              rows=\"2\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2 mt-4\">\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-4\">\r\n              <div className=\"flex items-start\">\r\n                <svg className=\"w-5 h-5 text-blue-600 mt-1 mr-2 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\"/>\r\n                </svg>\r\n                <div className=\"text-sm text-blue-800\">\r\n                  <p className=\"font-medium\">Solo para residentes del conjunto</p>\r\n                  <p>Verificaremos tu dirección antes de aprobar el registro. Solo un registro por apartamento.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleSubmit}\r\n              disabled={isLoading}\r\n              className=\"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50\"\r\n            >\r\n              {isLoading ? 'Registrando...' : 'Registrarse en Supercasa'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-gray-600 text-sm\">\r\n            ¿Ya tienes cuenta?{' '}\r\n            <button\r\n              onClick={onSwitchToLogin}\r\n              className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n            >\r\n              Inicia sesión\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Componente principal de la tienda\r\nfunction Store({ user, token, onLogout }) {\r\n  const [productos, setProductos] = useState([]);\r\n  const [carrito, setCarrito] = useState([]);\r\n  const [categoriaSeleccionada, setCategoriaSeleccionada] = useState('');\r\n  const [showCart, setShowCart] = useState(false);\r\n  const [showCheckout, setShowCheckout] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // Datos de entrega específicos para conjunto residencial\r\n  const [deliveryData, setDeliveryData] = useState({\r\n    torre_entrega: user?.torre || '1',\r\n    piso_entrega: user?.piso || '',\r\n    apartamento_entrega: user?.apartamento || '',\r\n    instrucciones_entrega: user?.notas_entrega || '',\r\n    horario_preferido: '',\r\n    telefono_contacto: user?.telefono || ''\r\n  });\r\n\r\n  // Actualizar deliveryData cuando user cambie\r\n  useEffect(() => {\r\n    if (user) {\r\n      setDeliveryData({\r\n        torre_entrega: user.torre || '1',\r\n        piso_entrega: user.piso || '',\r\n        apartamento_entrega: user.apartamento || '',\r\n        instrucciones_entrega: user.notas_entrega || '',\r\n        horario_preferido: '',\r\n        telefono_contacto: user.telefono || ''\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  // Cargar productos desde la base de datos\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    // ✅ CORREGIDO: URL dinámica con template literals correctos\r\n    fetch(`${API_URL}/productos`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(\"Productos cargados desde la base de datos:\", data);\r\n        setProductos(data);\r\n        setIsLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error al cargar los productos:', error);\r\n        // Fallback con productos de ejemplo si la API no está disponible\r\n        const productosEjemplo = [\r\n          { id: 1, nombre: 'Arroz Diana 500g', precio: 3500, categoria: 'Despensa', imagen: 'https://via.placeholder.com/200x200?text=Arroz', stock: 50 },\r\n          { id: 2, nombre: 'Leche Alquería 1L', precio: 4200, categoria: 'Lacteos', imagen: 'https://via.placeholder.com/200x200?text=Leche', stock: 30 },\r\n          { id: 3, nombre: 'Pan Tajado', precio: 2800, categoria: 'Panadería', imagen: 'https://via.placeholder.com/200x200?text=Pan', stock: 25 },\r\n          { id: 4, nombre: 'Huevos AA x30', precio: 8500, categoria: 'Proteínas', imagen: 'https://via.placeholder.com/200x200?text=Huevos', stock: 40 },\r\n          { id: 5, nombre: 'Aceite de Cocina 500ml', precio: 6500, categoria: 'Despensa', imagen: 'https://via.placeholder.com/200x200?text=Aceite', stock: 35 }\r\n        ];\r\n        setProductos(productosEjemplo);\r\n        setIsLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // Filtrar productos\r\n  const productosFiltrados = productos.filter(producto => {\r\n    const matchesCategory = categoriaSeleccionada ? producto.categoria === categoriaSeleccionada : true;\r\n    const matchesSearch = producto.nombre.toLowerCase().includes(searchTerm.toLowerCase());\r\n    return matchesCategory && matchesSearch;\r\n  });\r\n\r\n  const categorias = [...new Set(productos.map(producto => producto.categoria))];\r\n\r\n  const agregarAlCarrito = (producto) => {\r\n    const productoExistente = carrito.find(item => item.id === producto.id);\r\n    \r\n    if (productoExistente) {\r\n      setCarrito(carrito.map(item =>\r\n        item.id === producto.id\r\n          ? { ...item, cantidad: item.cantidad + 1 }\r\n          : item\r\n      ));\r\n    } else {\r\n      setCarrito([...carrito, { ...producto, cantidad: 1 }]);\r\n    }\r\n  };\r\n\r\n  const eliminarDelCarrito = (productoId) => {\r\n    const productoExistente = carrito.find(item => item.id === productoId);\r\n    \r\n    if (productoExistente.cantidad > 1) {\r\n      setCarrito(carrito.map(item =>\r\n        item.id === productoId\r\n          ? { ...item, cantidad: item.cantidad - 1 }\r\n          : item\r\n      ));\r\n    } else {\r\n      setCarrito(carrito.filter(item => item.id !== productoId));\r\n    }\r\n  };\r\n\r\n  const finalizarCompra = async () => {\r\n    if (carrito.length === 0) {\r\n      alert('El carrito está vacío');\r\n      return;\r\n    }\r\n    setShowCheckout(true);\r\n  };\r\n\r\n  const confirmarPedido = async () => {\r\n    const totalPedido = carrito.reduce((acc, item) => acc + Number(item.precio) * item.cantidad, 0);\r\n\r\n    // Debug: Mostrar datos de entrega\r\n    console.log('Datos de entrega:', deliveryData);\r\n\r\n    // Validación mejorada\r\n    if (!deliveryData.torre_entrega) {\r\n      alert('Por favor selecciona la torre de entrega');\r\n      return;\r\n    }\r\n    if (!deliveryData.piso_entrega) {\r\n      alert('Por favor ingresa el piso de entrega');\r\n      return;\r\n    }\r\n    if (!deliveryData.apartamento_entrega) {\r\n      alert('Por favor ingresa el apartamento de entrega');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // ✅ CORREGIDO: URL dinámica con template literals correctos\r\n      const res = await fetch(`${API_URL}/orders`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          productos: carrito,\r\n          total: totalPedido,\r\n          ...deliveryData\r\n        }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        alert(`✅ Pedido realizado correctamente\\n📍 Entrega: Torre ${deliveryData.torre_entrega}, Piso ${deliveryData.piso_entrega}, Apt ${deliveryData.apartamento_entrega}\\n📱 Te contactaremos para coordinar la entrega`);\r\n        setCarrito([]);\r\n        setShowCart(false);\r\n        setShowCheckout(false);\r\n      } else {\r\n        const err = await res.json();\r\n        alert('❌ Error al realizar el pedido: ' + err.error);\r\n      }\r\n    } catch (error) {\r\n      alert('❌ Error de red al realizar el pedido');\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const total = carrito.reduce((acc, item) => acc + item.precio * item.cantidad, 0);\r\n  const totalItems = carrito.reduce((acc, item) => acc + item.cantidad, 0);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600 text-lg\">Cargando productos...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-lg sticky top-0 z-40\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl\">\r\n                <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z\"/>\r\n                </svg>\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n                  Supercasa\r\n                </h1>\r\n                <p className=\"text-sm text-gray-600\">\r\n                  {user.direccion || `Torre ${user.torre}, Piso ${user.piso}, Apt ${user.apartamento}`}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"hidden md:flex items-center space-x-2\">\r\n                <span className=\"text-gray-600\">Hola, {user.nombre}</span>\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => setShowCart(true)}\r\n                className=\"relative bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\"/>\r\n                </svg>\r\n                {totalItems > 0 && (\r\n                  <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center\">\r\n                    {totalItems}\r\n                  </span>\r\n                )}\r\n              </button>\r\n              \r\n              <button\r\n                onClick={onLogout}\r\n                className=\"text-gray-600 hover:text-gray-800 p-2 rounded-xl hover:bg-gray-100 transition-all\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 01-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z\" clipRule=\"evenodd\"/>\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Filtros y búsqueda */}\r\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n        <div className=\"bg-white rounded-2xl shadow-lg p-6 mb-6\">\r\n          <div className=\"flex flex-col md:flex-row gap-4\">\r\n            <div className=\"flex-1\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar productos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            \r\n            <select\r\n              value={categoriaSeleccionada}\r\n              onChange={(e) => setCategoriaSeleccionada(e.target.value)}\r\n              className=\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">Todas las categorías</option>\r\n              {categorias.map(categoria => (\r\n                <option key={categoria} value={categoria}>{categoria}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Grid de productos */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {productosFiltrados.map(producto => (\r\n            <div key={producto.id} className=\"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all transform hover:scale-105\">\r\n              <img\r\n                src={producto.imagen}\r\n                alt={producto.nombre}\r\n                className=\"w-full h-48 object-cover\"\r\n              />\r\n              <div className=\"p-4\">\r\n                <h3 className=\"font-semibold text-gray-800 mb-2\">{producto.nombre}</h3>\r\n                <p className=\"text-gray-600 text-sm mb-2\">{producto.categoria}</p>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-xl font-bold text-blue-600\">\r\n                    ${producto.precio.toLocaleString()}\r\n                  </span>\r\n                  <span className=\"text-sm text-gray-500\">\r\n                    Stock: {producto.stock}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={() => agregarAlCarrito(producto)}\r\n                  disabled={producto.stock === 0}\r\n                  className=\"w-full mt-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {producto.stock === 0 ? 'Sin stock' : 'Agregar al carrito'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {productosFiltrados.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"text-gray-400 text-6xl mb-4\">🔍</div>\r\n            <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">No se encontraron productos</h3>\r\n            <p className=\"text-gray-500\">Intenta con otros términos de búsqueda o categorías</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal del carrito */}\r\n      {showCart && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-2xl font-bold text-gray-800\">Tu Carrito</h2>\r\n                <button\r\n                  onClick={() => setShowCart(false)}\r\n                  className=\"text-gray-500 hover:text-gray-700\"\r\n                >\r\n                  <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6\">\r\n              {carrito.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <div className=\"text-gray-400 text-6xl mb-4\">🛒</div>\r\n                  <p className=\"text-gray-600\">Tu carrito está vacío</p>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {carrito.map(item => (\r\n                    <div key={item.id} className=\"flex items-center justify-between py-4 border-b border-gray-100\">\r\n                      <div className=\"flex items-center space-x-4\">\r\n                        <img src={item.imagen} alt={item.nombre} className=\"w-16 h-16 object-cover rounded-lg\" />\r\n                        <div>\r\n                          <h3 className=\"font-semibold text-gray-800\">{item.nombre}</h3>\r\n                          <p className=\"text-gray-600\">${item.precio.toLocaleString()}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <button\r\n                          onClick={() => eliminarDelCarrito(item.id)}\r\n                          className=\"bg-red-100 text-red-600 p-1 rounded-lg hover:bg-red-200\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                            <path fillRule=\"evenodd\" d=\"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\"/>\r\n                          </svg>\r\n                        </button>\r\n                        <span className=\"px-3 py-1 bg-gray-100 rounded-lg\">{item.cantidad}</span>\r\n                        <button\r\n                          onClick={() => agregarAlCarrito(item)}\r\n                          className=\"bg-blue-100 text-blue-600 p-1 rounded-lg hover:bg-blue-200\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                            <path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\"/>\r\n                          </svg>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                    <div className=\"flex justify-between items-center mb-4\">\r\n                      <span className=\"text-xl font-bold text-gray-800\">Total:</span>\r\n                      <span className=\"text-2xl font-bold text-blue-600\">${total.toLocaleString()}</span>\r\n                    </div>\r\n                    <button\r\n                      onClick={finalizarCompra}\r\n                      className=\"w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all\"\r\n                    >\r\n                      Finalizar Compra\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de checkout */}\r\n      {showCheckout && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-2xl font-bold text-gray-800\">Confirmar Pedido</h2>\r\n                <button\r\n                  onClick={() => setShowCheckout(false)}\r\n                  className=\"text-gray-500 hover:text-gray-700\"\r\n                >\r\n                  <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">📍 Datos de Entrega</h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                <div>\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Torre</label>\r\n                  <select\r\n                    value={deliveryData.torre_entrega}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, torre_entrega: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"1\">Torre 1</option>\r\n                    <option value=\"2\">Torre 2</option>\r\n                    <option value=\"3\">Torre 3</option>\r\n                    <option value=\"4\">Torre 4</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Piso</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={deliveryData.piso_entrega}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, piso_entrega: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                    min=\"1\"\r\n                    max=\"30\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Apartamento</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={deliveryData.apartamento_entrega}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, apartamento_entrega: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Teléfono</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={deliveryData.telefono_contacto}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, telefono_contacto: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Horario Preferido</label>\r\n                  <select\r\n                    value={deliveryData.horario_preferido}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, horario_preferido: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"\">Selecciona horario</option>\r\n                    <option value=\"mañana\">Mañana (8:00 AM - 12:00 PM)</option>\r\n                    <option value=\"tarde\">Tarde (12:00 PM - 6:00 PM)</option>\r\n                    <option value=\"noche\">Noche (6:00 PM - 9:00 PM)</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-gray-700 text-sm font-medium mb-2\">Instrucciones de Entrega</label>\r\n                  <textarea\r\n                    value={deliveryData.instrucciones_entrega}\r\n                    onChange={(e) => setDeliveryData({...deliveryData, instrucciones_entrega: e.target.value})}\r\n                    className=\"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Ej: Llamar al celular, timbre no funciona\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t border-gray-200 pt-6\">\r\n                <h3 className=\"text-lg font-semibold mb-4\">📦 Resumen del Pedido</h3>\r\n                {carrito.map(item => (\r\n                  <div key={item.id} className=\"flex justify-between items-center py-2\">\r\n                    <span>{item.nombre} x{item.cantidad}</span>\r\n                    <span>${(item.precio * item.cantidad).toLocaleString()}</span>\r\n                  </div>\r\n                ))}\r\n                <div className=\"border-t border-gray-200 mt-4 pt-4\">\r\n                  <div className=\"flex justify-between items-center text-xl font-bold\">\r\n                    <span>Total:</span>\r\n                    <span className=\"text-blue-600\">${total.toLocaleString()}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={confirmarPedido}\r\n                  className=\"w-full mt-6 bg-gradient-to-r from-green-500 to-blue-600 text-white py-3 rounded-xl hover:from-green-600 hover:to-blue-700 transition-all\"\r\n                >\r\n                  Confirmar Pedido\r\n                </button>\r\n                \r\n                {/* Botón temporal de debug */}\r\n                <button\r\n                  onClick={() => {\r\n                    console.log('DEBUG - Datos de entrega:', deliveryData);\r\n                    console.log('DEBUG - Usuario:', user);\r\n                    alert(`DEBUG:\\nTorre: \"${deliveryData.torre_entrega}\"\\nPiso: \"${deliveryData.piso_entrega}\"\\nApt: \"${deliveryData.apartamento_entrega}\"\\nTeléfono: \"${deliveryData.telefono_contacto}\"`);\r\n                  }}\r\n                  className=\"w-full mt-2 bg-gray-500 text-white py-2 rounded-xl hover:bg-gray-600 transition-all text-sm\"\r\n                >\r\n                  🔍 Debug - Ver Datos\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"6IAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,eAAe,CAAE;AAErC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBACA,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAEhD;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAChD,KAAM,CAAAC,SAAS,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAE9C,GAAIF,UAAU,EAAIG,SAAS,CAAE,CAC3B,GAAI,CACFN,QAAQ,CAACG,UAAU,CAAC,CACpBL,OAAO,CAACS,IAAI,CAACC,KAAK,CAACF,SAAS,CAAC,CAAC,CAC9BG,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEH,IAAI,CAACC,KAAK,CAACF,SAAS,CAAC,CAACK,MAAM,CAAC,CACtE,CAAE,MAAOC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjDR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAChCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC,CACjC,CACF,CACAX,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAY,WAAW,CAAGA,CAACC,QAAQ,CAAEC,SAAS,GAAK,CAC3CP,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEK,QAAQ,CAACJ,MAAM,CAAC,CACpEb,OAAO,CAACiB,QAAQ,CAAC,CACjBf,QAAQ,CAACgB,SAAS,CAAC,CAEnBZ,YAAY,CAACa,OAAO,CAAC,OAAO,CAAED,SAAS,CAAC,CACxCZ,YAAY,CAACa,OAAO,CAAC,MAAM,CAAEV,IAAI,CAACW,SAAS,CAACH,QAAQ,CAAC,CAAC,CACxD,CAAC,CAED,KAAM,CAAAI,YAAY,CAAGA,CAAA,GAAM,CACzBrB,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CAEdI,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAChCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC,CACjC,CAAC,CAED,GAAIZ,SAAS,CAAE,CACb,mBACEV,IAAA,QAAK6B,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzG9B,IAAA,QAAK6B,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA;AACA,GAAI,CAACvB,IAAI,EAAI,CAACE,KAAK,CAAE,CACnB,mBAAOR,IAAA,CAAC+B,aAAa,EAACC,MAAM,CAAET,WAAY,CAAE,CAAC,CAC/C,CAEA;AACA,mBAAOvB,IAAA,CAACiC,KAAK,EAAC3B,IAAI,CAAEA,IAAK,CAACE,KAAK,CAAEA,KAAM,CAAC0B,QAAQ,CAAEN,YAAa,CAAE,CAAC,CACpE,CAEA;AACA,QAAS,CAAAG,aAAaA,CAAAI,IAAA,CAAa,IAAZ,CAAEH,MAAO,CAAC,CAAAG,IAAA,CAC/B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGxC,QAAQ,CAAC,IAAI,CAAC,CAEhD,MAAO,CAAAuC,SAAS,cACdpC,IAAA,CAACsC,SAAS,EACRC,OAAO,CAAEP,MAAO,CAChBQ,kBAAkB,CAAEA,CAAA,GAAMH,YAAY,CAAC,KAAK,CAAE,CAC/C,CAAC,cAEFrC,IAAA,CAACyC,YAAY,EACXC,UAAU,CAAEV,MAAO,CACnBW,eAAe,CAAEA,CAAA,GAAMN,YAAY,CAAC,IAAI,CAAE,CAC3C,CACF,CACH,CAEA;AACA,QAAS,CAAAC,SAASA,CAAAM,KAAA,CAAkC,IAAjC,CAAEL,OAAO,CAAEC,kBAAmB,CAAC,CAAAI,KAAA,CAChD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGjD,QAAQ,CAAC,CACvCkD,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACtC,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACwB,KAAK,CAAE4B,QAAQ,CAAC,CAAGpD,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAqD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACL,QAAQ,CAACE,KAAK,EAAI,CAACF,QAAQ,CAACG,QAAQ,CAAE,CACzCC,QAAQ,CAAC,qCAAqC,CAAC,CAC/C,OACF,CAEAtC,YAAY,CAAC,IAAI,CAAC,CAClBsC,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF;AACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIvD,OAAO,gBAAe,CACpDwD,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAExC,IAAI,CAACW,SAAS,CAACkB,QAAQ,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAY,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAElC,GAAIP,QAAQ,CAACQ,EAAE,CAAE,CACfpB,OAAO,CAACkB,IAAI,CAACnD,IAAI,CAAEmD,IAAI,CAACjD,KAAK,CAAC,CAChC,CAAC,IAAM,CACLyC,QAAQ,CAACQ,IAAI,CAACpC,KAAK,EAAI,yBAAyB,CAAC,CACnD,CACF,CAAE,MAAOA,KAAK,CAAE,CACd4B,QAAQ,CAAC,iEAAiE,CAAC,CAC7E,CAAC,OAAS,CACRtC,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEX,IAAA,QAAK6B,SAAS,CAAC,gGAAgG,CAAAC,QAAA,cAC7G5B,KAAA,QAAK2B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClE5B,KAAA,QAAK2B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9B,IAAA,QAAK6B,SAAS,CAAC,0FAA0F,CAAAC,QAAA,cACvG9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAM8D,CAAC,CAAC,ufAAuf,CAAC,CAAC,CAC9f,CAAC,CACH,CAAC,cACN9D,IAAA,OAAI6B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACpE9B,IAAA,MAAG6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,EAClD,CAAC,CAELT,KAAK,eACJrB,IAAA,QAAK6B,SAAS,CAAC,wEAAwE,CAAAC,QAAA,CACpFT,KAAK,CACH,CACN,cAEDnB,KAAA,QAAK2B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC7E9B,IAAA,UACE+D,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEnB,QAAQ,CAACE,KAAM,CACtBkB,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEE,KAAK,CAAEmB,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACnEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cAENnE,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,eAAU,CAAO,CAAC,cAClF9B,IAAA,UACE+D,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEnB,QAAQ,CAACG,QAAS,CACzBiB,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEG,QAAQ,CAAEkB,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACtEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,kDAAU,CACvB,CAAC,EACC,CAAC,cAENrE,IAAA,WACEsE,OAAO,CAAEpB,YAAa,CACtBqB,QAAQ,CAAE7D,SAAU,CACpBmB,SAAS,CAAC,4NAA4N,CAAAC,QAAA,CAErOpB,SAAS,CAAG,qBAAqB,CAAG,gBAAgB,CAC/C,CAAC,EACN,CAAC,cAENV,IAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B5B,KAAA,MAAG2B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,uBACT,CAAC,GAAG,cACtB9B,IAAA,WACEsE,OAAO,CAAE9B,kBAAmB,CAC5BX,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAC1D,uBAED,CAAQ,CAAC,EACR,CAAC,CACD,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAAW,YAAYA,CAAA+B,KAAA,CAAkC,IAAjC,CAAE9B,UAAU,CAAEC,eAAgB,CAAC,CAAA6B,KAAA,CACnD,KAAM,CAAC3B,QAAQ,CAAEC,WAAW,CAAC,CAAGjD,QAAQ,CAAC,CACvCuB,MAAM,CAAE,EAAE,CACV2B,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZyB,eAAe,CAAE,EAAE,CACnBC,QAAQ,CAAE,EAAE,CACZC,oBAAoB,CAAE,EAAE,CACxBC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,aAAa,CAAE,EACjB,CAAC,CAAC,CACF,KAAM,CAACrE,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACwB,KAAK,CAAE4B,QAAQ,CAAC,CAAGpD,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAqD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACL,QAAQ,CAACzB,MAAM,EAAI,CAACyB,QAAQ,CAACE,KAAK,EAAI,CAACF,QAAQ,CAACG,QAAQ,EAAI,CAACH,QAAQ,CAAC+B,KAAK,EAAI,CAAC/B,QAAQ,CAACgC,IAAI,EAAI,CAAChC,QAAQ,CAACiC,WAAW,CAAE,CAC3H7B,QAAQ,CAAC,kDAAkD,CAAC,CAC5D,OACF,CAEA,GAAIJ,QAAQ,CAACG,QAAQ,GAAKH,QAAQ,CAAC4B,eAAe,CAAE,CAClDxB,QAAQ,CAAC,8BAA8B,CAAC,CACxC,OACF,CAEA,GAAIJ,QAAQ,CAACG,QAAQ,CAACgC,MAAM,CAAG,CAAC,CAAE,CAChC/B,QAAQ,CAAC,gDAAgD,CAAC,CAC1D,OACF,CAEA,GAAI,CAAC,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAACgC,QAAQ,CAACpC,QAAQ,CAAC+B,KAAK,CAAC,CAAE,CAClD3B,QAAQ,CAAC,6BAA6B,CAAC,CACvC,OACF,CAEA,GAAIJ,QAAQ,CAACgC,IAAI,CAAG,CAAC,EAAIhC,QAAQ,CAACgC,IAAI,CAAG,EAAE,CAAE,CAC3C5B,QAAQ,CAAC,iCAAiC,CAAC,CAC3C,OACF,CAEAtC,YAAY,CAAC,IAAI,CAAC,CAClBsC,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF;AACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIvD,OAAO,mBAAkB,CACvDwD,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAExC,IAAI,CAACW,SAAS,CAACkB,QAAQ,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAY,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAElC,GAAIP,QAAQ,CAACQ,EAAE,CAAE,CACfjB,UAAU,CAACe,IAAI,CAACnD,IAAI,CAAEmD,IAAI,CAACjD,KAAK,CAAC,CACnC,CAAC,IAAM,CACLyC,QAAQ,CAACQ,IAAI,CAACpC,KAAK,EAAI,sBAAsB,CAAC,CAChD,CACF,CAAE,MAAOA,KAAK,CAAE,CACd4B,QAAQ,CAAC,iEAAiE,CAAC,CAC7E,CAAC,OAAS,CACRtC,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEX,IAAA,QAAK6B,SAAS,CAAC,gGAAgG,CAAAC,QAAA,cAC7G5B,KAAA,QAAK2B,SAAS,CAAC,mFAAmF,CAAAC,QAAA,eAChG5B,KAAA,QAAK2B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9B,IAAA,QAAK6B,SAAS,CAAC,yFAAyF,CAAAC,QAAA,cACtG9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAM8D,CAAC,CAAC,ufAAuf,CAAC,CAAC,CAC9f,CAAC,CACH,CAAC,cACN9D,IAAA,OAAI6B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,+BAA6B,CAAI,CAAC,cACxF9B,IAAA,MAAG6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,6CAAwC,CAAG,CAAC,EACtE,CAAC,CAELT,KAAK,eACJrB,IAAA,QAAK6B,SAAS,CAAC,wEAAwE,CAAAC,QAAA,CACpFT,KAAK,CACH,CACN,cAEDnB,KAAA,QAAK2B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eAEpD9B,IAAA,QAAK6B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B9B,IAAA,OAAI6B,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,sCAAuB,CAAI,CAAC,CAChG,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,mBAAiB,CAAO,CAAC,cACzF9B,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEnB,QAAQ,CAACzB,MAAO,CACvB6C,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEzB,MAAM,CAAE8C,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACpEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,oBAAoB,CACjC,CAAC,EACC,CAAC,cAENnE,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E9B,IAAA,UACE+D,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEnB,QAAQ,CAACE,KAAM,CACtBkB,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEE,KAAK,CAAEmB,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACnEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cAENnE,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,iBAAY,CAAO,CAAC,cACpF9B,IAAA,UACE+D,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEnB,QAAQ,CAACG,QAAS,CACzBiB,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEG,QAAQ,CAAEkB,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACtEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,kDAAU,CACvB,CAAC,EACC,CAAC,cAENnE,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,2BAAsB,CAAO,CAAC,cAC9F9B,IAAA,UACE+D,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEnB,QAAQ,CAAC4B,eAAgB,CAChCR,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAE4B,eAAe,CAAEP,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAC7EnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,kDAAU,CACvB,CAAC,EACC,CAAC,cAGNrE,IAAA,QAAK6B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC9B,IAAA,OAAI6B,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,uBAAW,CAAI,CAAC,CACpF,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,yBAAoB,CAAO,CAAC,cAC5F9B,IAAA,UACE+D,IAAI,CAAC,KAAK,CACVC,KAAK,CAAEnB,QAAQ,CAAC6B,QAAS,CACzBT,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAE6B,QAAQ,CAAER,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACtEnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cAENnE,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,yBAAoB,CAAO,CAAC,cAC5F9B,IAAA,UACE+D,IAAI,CAAC,KAAK,CACVC,KAAK,CAAEnB,QAAQ,CAAC8B,oBAAqB,CACrCV,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAE8B,oBAAoB,CAAET,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAClFnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cAGNrE,IAAA,QAAK6B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC9B,IAAA,OAAI6B,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,0CAA2B,CAAI,CAAC,CACpG,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/E5B,KAAA,WACE8D,KAAK,CAAEnB,QAAQ,CAAC+B,KAAM,CACtBX,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAE+B,KAAK,CAAEV,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACnEnC,SAAS,CAAC,8GAA8G,CAAAC,QAAA,eAExH9B,IAAA,WAAQgE,KAAK,CAAC,EAAE,CAAAlC,QAAA,CAAC,qBAAmB,CAAQ,CAAC,cAC7C9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC5B,CAAC,EACN,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,QAAM,CAAO,CAAC,cAC9E5B,KAAA,WACE8D,KAAK,CAAEnB,QAAQ,CAACgC,IAAK,CACrBZ,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEgC,IAAI,CAAEX,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAClEnC,SAAS,CAAC,8GAA8G,CAAAC,QAAA,eAExH9B,IAAA,WAAQgE,KAAK,CAAC,EAAE,CAAAlC,QAAA,CAAC,oBAAkB,CAAQ,CAAC,CAC3CoD,KAAK,CAACC,IAAI,CAAC,CAACH,MAAM,CAAE,EAAE,CAAC,CAAE,CAACI,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAAG,CAAC,CAAC,CAACC,GAAG,CAACT,IAAI,eACjD3E,KAAA,WAAmB8D,KAAK,CAAEa,IAAK,CAAA/C,QAAA,EAAC,OAAK,CAAC+C,IAAI,GAA7BA,IAAsC,CACpD,CAAC,EACI,CAAC,EACN,CAAC,cAEN3E,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,eAAa,CAAO,CAAC,cACrF9B,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEnB,QAAQ,CAACiC,WAAY,CAC5Bb,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEiC,WAAW,CAAEZ,CAAC,CAACE,MAAM,CAACJ,KAAK,CAACuB,WAAW,CAAC,CAAC,EAAC,CAAE,CACvF1D,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,qBAAqB,CAClC,CAAC,EACC,CAAC,cAENnE,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,oBAAkB,CAAO,CAAC,cAC1F9B,IAAA,aACEgE,KAAK,CAAEnB,QAAQ,CAACkC,aAAc,CAC9Bd,QAAQ,CAAGC,CAAC,EAAKpB,WAAW,CAAAqB,aAAA,CAAAA,aAAA,IAAKtB,QAAQ,MAAEkC,aAAa,CAAEb,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAC3EnC,SAAS,CAAC,8GAA8G,CACxHwC,WAAW,CAAC,4DAAyD,CACrEmB,IAAI,CAAC,GAAG,CACT,CAAC,EACC,CAAC,cAENtF,KAAA,QAAK2B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC9B,IAAA,QAAK6B,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpE5B,KAAA,QAAK2B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9B,IAAA,QAAK6B,SAAS,CAAC,+CAA+C,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cACpG9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,kIAAkI,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CAC/K,CAAC,cACNxF,KAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpC9B,IAAA,MAAG6B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,mCAAiC,CAAG,CAAC,cAChE9B,IAAA,MAAA8B,QAAA,CAAG,+FAA0F,CAAG,CAAC,EAC9F,CAAC,EACH,CAAC,CACH,CAAC,cAEN9B,IAAA,WACEsE,OAAO,CAAEpB,YAAa,CACtBqB,QAAQ,CAAE7D,SAAU,CACpBmB,SAAS,CAAC,0NAA0N,CAAAC,QAAA,CAEnOpB,SAAS,CAAG,gBAAgB,CAAG,0BAA0B,CACpD,CAAC,EACN,CAAC,EACH,CAAC,cAENV,IAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B5B,KAAA,MAAG2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,uBACjB,CAAC,GAAG,cACtB9B,IAAA,WACEsE,OAAO,CAAE3B,eAAgB,CACzBd,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAC1D,kBAED,CAAQ,CAAC,EACR,CAAC,CACD,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAAG,KAAKA,CAAA0D,KAAA,CAA4B,IAA3B,CAAErF,IAAI,CAAEE,KAAK,CAAE0B,QAAS,CAAC,CAAAyD,KAAA,CACtC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGhG,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACiG,OAAO,CAAEC,UAAU,CAAC,CAAGlG,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACmG,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGpG,QAAQ,CAAC,EAAE,CAAC,CACtE,KAAM,CAACqG,QAAQ,CAAEC,WAAW,CAAC,CAAGtG,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACuG,YAAY,CAAEC,eAAe,CAAC,CAAGxG,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACyG,UAAU,CAAEC,aAAa,CAAC,CAAG1G,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAEhD;AACA,KAAM,CAAC2G,YAAY,CAAEC,eAAe,CAAC,CAAG5G,QAAQ,CAAC,CAC/C6G,aAAa,CAAE,CAAApG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsE,KAAK,GAAI,GAAG,CACjC+B,YAAY,CAAE,CAAArG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEuE,IAAI,GAAI,EAAE,CAC9B+B,mBAAmB,CAAE,CAAAtG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEwE,WAAW,GAAI,EAAE,CAC5C+B,qBAAqB,CAAE,CAAAvG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEyE,aAAa,GAAI,EAAE,CAChD+B,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAE,CAAAzG,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEoE,QAAQ,GAAI,EACvC,CAAC,CAAC,CAEF;AACA9E,SAAS,CAAC,IAAM,CACd,GAAIU,IAAI,CAAE,CACRmG,eAAe,CAAC,CACdC,aAAa,CAAEpG,IAAI,CAACsE,KAAK,EAAI,GAAG,CAChC+B,YAAY,CAAErG,IAAI,CAACuE,IAAI,EAAI,EAAE,CAC7B+B,mBAAmB,CAAEtG,IAAI,CAACwE,WAAW,EAAI,EAAE,CAC3C+B,qBAAqB,CAAEvG,IAAI,CAACyE,aAAa,EAAI,EAAE,CAC/C+B,iBAAiB,CAAE,EAAE,CACrBC,iBAAiB,CAAEzG,IAAI,CAACoE,QAAQ,EAAI,EACtC,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACpE,IAAI,CAAC,CAAC,CAEV;AACAV,SAAS,CAAC,IAAM,CACde,YAAY,CAAC,IAAI,CAAC,CAClB;AACAyC,KAAK,IAAAC,MAAA,CAAIvD,OAAO,cAAY,CAAC,CAC1BkH,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACvD,IAAI,CAAC,CAAC,CAAC,CACzBsD,IAAI,CAAEvD,IAAI,EAAK,CACdvC,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAEsC,IAAI,CAAC,CAC/DoC,YAAY,CAACpC,IAAI,CAAC,CAClB9C,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACDuG,KAAK,CAAE7F,KAAK,EAAK,CAChBH,OAAO,CAACG,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtD;AACA,KAAM,CAAA8F,gBAAgB,CAAG,CACvB,CAAEC,EAAE,CAAE,CAAC,CAAEhG,MAAM,CAAE,kBAAkB,CAAEiG,MAAM,CAAE,IAAI,CAAEC,SAAS,CAAE,UAAU,CAAEC,MAAM,CAAE,gDAAgD,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC/I,CAAEJ,EAAE,CAAE,CAAC,CAAEhG,MAAM,CAAE,mBAAmB,CAAEiG,MAAM,CAAE,IAAI,CAAEC,SAAS,CAAE,SAAS,CAAEC,MAAM,CAAE,gDAAgD,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC/I,CAAEJ,EAAE,CAAE,CAAC,CAAEhG,MAAM,CAAE,YAAY,CAAEiG,MAAM,CAAE,IAAI,CAAEC,SAAS,CAAE,WAAW,CAAEC,MAAM,CAAE,8CAA8C,CAAEC,KAAK,CAAE,EAAG,CAAC,CACxI,CAAEJ,EAAE,CAAE,CAAC,CAAEhG,MAAM,CAAE,eAAe,CAAEiG,MAAM,CAAE,IAAI,CAAEC,SAAS,CAAE,WAAW,CAAEC,MAAM,CAAE,iDAAiD,CAAEC,KAAK,CAAE,EAAG,CAAC,CAC9I,CAAEJ,EAAE,CAAE,CAAC,CAAEhG,MAAM,CAAE,wBAAwB,CAAEiG,MAAM,CAAE,IAAI,CAAEC,SAAS,CAAE,UAAU,CAAEC,MAAM,CAAE,iDAAiD,CAAEC,KAAK,CAAE,EAAG,CAAC,CACvJ,CACD3B,YAAY,CAACsB,gBAAgB,CAAC,CAC9BxG,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAA8G,kBAAkB,CAAG7B,SAAS,CAAC8B,MAAM,CAACC,QAAQ,EAAI,CACtD,KAAM,CAAAC,eAAe,CAAG5B,qBAAqB,CAAG2B,QAAQ,CAACL,SAAS,GAAKtB,qBAAqB,CAAG,IAAI,CACnG,KAAM,CAAA6B,aAAa,CAAGF,QAAQ,CAACvG,MAAM,CAAC0G,WAAW,CAAC,CAAC,CAAC7C,QAAQ,CAACqB,UAAU,CAACwB,WAAW,CAAC,CAAC,CAAC,CACtF,MAAO,CAAAF,eAAe,EAAIC,aAAa,CACzC,CAAC,CAAC,CAEF,KAAM,CAAAE,UAAU,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACpC,SAAS,CAACN,GAAG,CAACqC,QAAQ,EAAIA,QAAQ,CAACL,SAAS,CAAC,CAAC,CAAC,CAE9E,KAAM,CAAAW,gBAAgB,CAAIN,QAAQ,EAAK,CACrC,KAAM,CAAAO,iBAAiB,CAAGpC,OAAO,CAACqC,IAAI,CAACC,IAAI,EAAIA,IAAI,CAAChB,EAAE,GAAKO,QAAQ,CAACP,EAAE,CAAC,CAEvE,GAAIc,iBAAiB,CAAE,CACrBnC,UAAU,CAACD,OAAO,CAACR,GAAG,CAAC8C,IAAI,EACzBA,IAAI,CAAChB,EAAE,GAAKO,QAAQ,CAACP,EAAE,CAAAjD,aAAA,CAAAA,aAAA,IACdiE,IAAI,MAAEC,QAAQ,CAAED,IAAI,CAACC,QAAQ,CAAG,CAAC,GACtCD,IACN,CAAC,CAAC,CACJ,CAAC,IAAM,CACLrC,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAA3B,aAAA,CAAAA,aAAA,IAAOwD,QAAQ,MAAEU,QAAQ,CAAE,CAAC,GAAG,CAAC,CACxD,CACF,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAIC,UAAU,EAAK,CACzC,KAAM,CAAAL,iBAAiB,CAAGpC,OAAO,CAACqC,IAAI,CAACC,IAAI,EAAIA,IAAI,CAAChB,EAAE,GAAKmB,UAAU,CAAC,CAEtE,GAAIL,iBAAiB,CAACG,QAAQ,CAAG,CAAC,CAAE,CAClCtC,UAAU,CAACD,OAAO,CAACR,GAAG,CAAC8C,IAAI,EACzBA,IAAI,CAAChB,EAAE,GAAKmB,UAAU,CAAApE,aAAA,CAAAA,aAAA,IACbiE,IAAI,MAAEC,QAAQ,CAAED,IAAI,CAACC,QAAQ,CAAG,CAAC,GACtCD,IACN,CAAC,CAAC,CACJ,CAAC,IAAM,CACLrC,UAAU,CAACD,OAAO,CAAC4B,MAAM,CAACU,IAAI,EAAIA,IAAI,CAAChB,EAAE,GAAKmB,UAAU,CAAC,CAAC,CAC5D,CACF,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI1C,OAAO,CAACd,MAAM,GAAK,CAAC,CAAE,CACxByD,KAAK,CAAC,uBAAuB,CAAC,CAC9B,OACF,CACApC,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAAqC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,KAAM,CAAAC,WAAW,CAAG7C,OAAO,CAAC8C,MAAM,CAAC,CAACC,GAAG,CAAET,IAAI,GAAKS,GAAG,CAAGC,MAAM,CAACV,IAAI,CAACf,MAAM,CAAC,CAAGe,IAAI,CAACC,QAAQ,CAAE,CAAC,CAAC,CAE/F;AACAnH,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEqF,YAAY,CAAC,CAE9C;AACA,GAAI,CAACA,YAAY,CAACE,aAAa,CAAE,CAC/B+B,KAAK,CAAC,0CAA0C,CAAC,CACjD,OACF,CACA,GAAI,CAACjC,YAAY,CAACG,YAAY,CAAE,CAC9B8B,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OACF,CACA,GAAI,CAACjC,YAAY,CAACI,mBAAmB,CAAE,CACrC6B,KAAK,CAAC,6CAA6C,CAAC,CACpD,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAxB,GAAG,CAAG,KAAM,CAAA7D,KAAK,IAAAC,MAAA,CAAIvD,OAAO,YAAW,CAC3CwD,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAF,MAAA,CAAY7C,KAAK,CAClC,CAAC,CACDgD,IAAI,CAAExC,IAAI,CAACW,SAAS,CAAAwC,aAAA,EAClByB,SAAS,CAAEE,OAAO,CAClBiD,KAAK,CAAEJ,WAAW,EACfnC,YAAY,CAChB,CACH,CAAC,CAAC,CAEF,GAAIS,GAAG,CAACtD,EAAE,CAAE,CACV,KAAM,CAAAF,IAAI,CAAG,KAAM,CAAAwD,GAAG,CAACvD,IAAI,CAAC,CAAC,CAC7B+E,KAAK,uEAAApF,MAAA,CAAwDmD,YAAY,CAACE,aAAa,YAAArD,MAAA,CAAUmD,YAAY,CAACG,YAAY,WAAAtD,MAAA,CAASmD,YAAY,CAACI,mBAAmB,6DAAiD,CAAC,CACrNb,UAAU,CAAC,EAAE,CAAC,CACdI,WAAW,CAAC,KAAK,CAAC,CAClBE,eAAe,CAAC,KAAK,CAAC,CACxB,CAAC,IAAM,CACL,KAAM,CAAA2C,GAAG,CAAG,KAAM,CAAA/B,GAAG,CAACvD,IAAI,CAAC,CAAC,CAC5B+E,KAAK,CAAC,iCAAiC,CAAGO,GAAG,CAAC3H,KAAK,CAAC,CACtD,CACF,CAAE,MAAOA,KAAK,CAAE,CACdoH,KAAK,CAAC,sCAAsC,CAAC,CAC7CvH,OAAO,CAACG,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAA0H,KAAK,CAAGjD,OAAO,CAAC8C,MAAM,CAAC,CAACC,GAAG,CAAET,IAAI,GAAKS,GAAG,CAAGT,IAAI,CAACf,MAAM,CAAGe,IAAI,CAACC,QAAQ,CAAE,CAAC,CAAC,CACjF,KAAM,CAAAY,UAAU,CAAGnD,OAAO,CAAC8C,MAAM,CAAC,CAACC,GAAG,CAAET,IAAI,GAAKS,GAAG,CAAGT,IAAI,CAACC,QAAQ,CAAE,CAAC,CAAC,CAExE,GAAI3H,SAAS,CAAE,CACb,mBACEV,IAAA,QAAK6B,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzG5B,KAAA,QAAK2B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B9B,IAAA,QAAK6B,SAAS,CAAC,wEAAwE,CAAM,CAAC,cAC9F7B,IAAA,MAAG6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,EAChE,CAAC,CACH,CAAC,CAEV,CAEA,mBACE5B,KAAA,QAAK2B,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eAExE9B,IAAA,WAAQ6B,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACtD9B,IAAA,QAAK6B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C5B,KAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD5B,KAAA,QAAK2B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9B,IAAA,QAAK6B,SAAS,CAAC,wEAAwE,CAAAC,QAAA,cACrF9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAM8D,CAAC,CAAC,ufAAuf,CAAC,CAAC,CAC9f,CAAC,CACH,CAAC,cACN5D,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAI6B,SAAS,CAAC,+FAA+F,CAAAC,QAAA,CAAC,WAE9G,CAAI,CAAC,cACL9B,IAAA,MAAG6B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CACjCxB,IAAI,CAAC4I,SAAS,WAAA7F,MAAA,CAAa/C,IAAI,CAACsE,KAAK,YAAAvB,MAAA,CAAU/C,IAAI,CAACuE,IAAI,WAAAxB,MAAA,CAAS/C,IAAI,CAACwE,WAAW,CAAE,CACnF,CAAC,EACD,CAAC,EACH,CAAC,cAEN5E,KAAA,QAAK2B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9B,IAAA,QAAK6B,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpD5B,KAAA,SAAM2B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,QAAM,CAACxB,IAAI,CAACc,MAAM,EAAO,CAAC,CACvD,CAAC,cAENlB,KAAA,WACEoE,OAAO,CAAEA,CAAA,GAAM6B,WAAW,CAAC,IAAI,CAAE,CACjCtE,SAAS,CAAC,wIAAwI,CAAAC,QAAA,eAElJ9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAM8D,CAAC,CAAC,yRAAyR,CAAC,CAAC,CAChS,CAAC,CACLmF,UAAU,CAAG,CAAC,eACbjJ,IAAA,SAAM6B,SAAS,CAAC,8GAA8G,CAAAC,QAAA,CAC3HmH,UAAU,CACP,CACP,EACK,CAAC,cAETjJ,IAAA,WACEsE,OAAO,CAAEpC,QAAS,CAClBL,SAAS,CAAC,mFAAmF,CAAAC,QAAA,cAE7F9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,4KAA4K,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CACzN,CAAC,CACA,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACA,CAAC,cAGTxF,KAAA,QAAK2B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9B,IAAA,QAAK6B,SAAS,CAAC,yCAAyC,CAAAC,QAAA,cACtD5B,KAAA,QAAK2B,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9C9B,IAAA,QAAK6B,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB9B,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXM,WAAW,CAAC,qBAAqB,CACjCL,KAAK,CAAEsC,UAAW,CAClBrC,QAAQ,CAAGC,CAAC,EAAKqC,aAAa,CAACrC,CAAC,CAACE,MAAM,CAACJ,KAAK,CAAE,CAC/CnC,SAAS,CAAC,8GAA8G,CACzH,CAAC,CACC,CAAC,cAEN3B,KAAA,WACE8D,KAAK,CAAEgC,qBAAsB,CAC7B/B,QAAQ,CAAGC,CAAC,EAAK+B,wBAAwB,CAAC/B,CAAC,CAACE,MAAM,CAACJ,KAAK,CAAE,CAC1DnC,SAAS,CAAC,uGAAuG,CAAAC,QAAA,eAEjH9B,IAAA,WAAQgE,KAAK,CAAC,EAAE,CAAAlC,QAAA,CAAC,yBAAoB,CAAQ,CAAC,CAC7CiG,UAAU,CAACzC,GAAG,CAACgC,SAAS,eACvBtH,IAAA,WAAwBgE,KAAK,CAAEsD,SAAU,CAAAxF,QAAA,CAAEwF,SAAS,EAAvCA,SAAgD,CAC9D,CAAC,EACI,CAAC,EACN,CAAC,CACH,CAAC,cAGNtH,IAAA,QAAK6B,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CACjF2F,kBAAkB,CAACnC,GAAG,CAACqC,QAAQ,eAC9BzH,KAAA,QAAuB2B,SAAS,CAAC,yGAAyG,CAAAC,QAAA,eACxI9B,IAAA,QACEmJ,GAAG,CAAExB,QAAQ,CAACJ,MAAO,CACrB6B,GAAG,CAAEzB,QAAQ,CAACvG,MAAO,CACrBS,SAAS,CAAC,0BAA0B,CACrC,CAAC,cACF3B,KAAA,QAAK2B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB9B,IAAA,OAAI6B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAE6F,QAAQ,CAACvG,MAAM,CAAK,CAAC,cACvEpB,IAAA,MAAG6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAE6F,QAAQ,CAACL,SAAS,CAAI,CAAC,cAClEpH,KAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD5B,KAAA,SAAM2B,SAAS,CAAC,iCAAiC,CAAAC,QAAA,EAAC,GAC/C,CAAC6F,QAAQ,CAACN,MAAM,CAACgC,cAAc,CAAC,CAAC,EAC9B,CAAC,cACPnJ,KAAA,SAAM2B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,SAC/B,CAAC6F,QAAQ,CAACH,KAAK,EAClB,CAAC,EACJ,CAAC,cACNxH,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAM2D,gBAAgB,CAACN,QAAQ,CAAE,CAC1CpD,QAAQ,CAAEoD,QAAQ,CAACH,KAAK,GAAK,CAAE,CAC/B3F,SAAS,CAAC,4LAA4L,CAAAC,QAAA,CAErM6F,QAAQ,CAACH,KAAK,GAAK,CAAC,CAAG,WAAW,CAAG,oBAAoB,CACpD,CAAC,EACN,CAAC,GAxBEG,QAAQ,CAACP,EAyBd,CACN,CAAC,CACC,CAAC,CAELK,kBAAkB,CAACzC,MAAM,GAAK,CAAC,eAC9B9E,KAAA,QAAK2B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC9B,IAAA,QAAK6B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrD9B,IAAA,OAAI6B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,6BAA2B,CAAI,CAAC,cACzF9B,IAAA,MAAG6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,8DAAmD,CAAG,CAAC,EACjF,CACN,EACE,CAAC,CAGLoE,QAAQ,eACPlG,IAAA,QAAK6B,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7F5B,KAAA,QAAK2B,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAC5F9B,IAAA,QAAK6B,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C5B,KAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9B,IAAA,OAAI6B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,cAChE9B,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAM6B,WAAW,CAAC,KAAK,CAAE,CAClCtE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAE7C9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,oMAAoM,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CACjP,CAAC,CACA,CAAC,EACN,CAAC,CACH,CAAC,cAEN1F,IAAA,QAAK6B,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBgE,OAAO,CAACd,MAAM,GAAK,CAAC,cACnB9E,KAAA,QAAK2B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9B,IAAA,QAAK6B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACrD9B,IAAA,MAAG6B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,6BAAqB,CAAG,CAAC,EACnD,CAAC,cAEN5B,KAAA,CAAAE,SAAA,EAAA0B,QAAA,EACGgE,OAAO,CAACR,GAAG,CAAC8C,IAAI,eACflI,KAAA,QAAmB2B,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC5F5B,KAAA,QAAK2B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9B,IAAA,QAAKmJ,GAAG,CAAEf,IAAI,CAACb,MAAO,CAAC6B,GAAG,CAAEhB,IAAI,CAAChH,MAAO,CAACS,SAAS,CAAC,mCAAmC,CAAE,CAAC,cACzF3B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAI6B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEsG,IAAI,CAAChH,MAAM,CAAK,CAAC,cAC9DlB,KAAA,MAAG2B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,GAAC,CAACsG,IAAI,CAACf,MAAM,CAACgC,cAAc,CAAC,CAAC,EAAI,CAAC,EAC7D,CAAC,EACH,CAAC,cACNnJ,KAAA,QAAK2B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9B,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAMgE,kBAAkB,CAACF,IAAI,CAAChB,EAAE,CAAE,CAC3CvF,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cAEnE9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,kDAAkD,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CAC/F,CAAC,CACA,CAAC,cACT1F,IAAA,SAAM6B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEsG,IAAI,CAACC,QAAQ,CAAO,CAAC,cACzErI,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAM2D,gBAAgB,CAACG,IAAI,CAAE,CACtCvG,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cAEtE9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,uFAAuF,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CACpI,CAAC,CACA,CAAC,EACN,CAAC,GA1BE0C,IAAI,CAAChB,EA2BV,CACN,CAAC,cAEFlH,KAAA,QAAK2B,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjD5B,KAAA,QAAK2B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD9B,IAAA,SAAM6B,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,cAC/D5B,KAAA,SAAM2B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,EAAC,GAAC,CAACiH,KAAK,CAACM,cAAc,CAAC,CAAC,EAAO,CAAC,EAChF,CAAC,cACNrJ,IAAA,WACEsE,OAAO,CAAEkE,eAAgB,CACzB3G,SAAS,CAAC,qIAAqI,CAAAC,QAAA,CAChJ,kBAED,CAAQ,CAAC,EACN,CAAC,EACN,CACH,CACE,CAAC,EACH,CAAC,CACH,CACN,CAGAsE,YAAY,eACXpG,IAAA,QAAK6B,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7F5B,KAAA,QAAK2B,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAC5F9B,IAAA,QAAK6B,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C5B,KAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9B,IAAA,OAAI6B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACtE9B,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAM+B,eAAe,CAAC,KAAK,CAAE,CACtCxE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAE7C9B,IAAA,QAAK6B,SAAS,CAAC,SAAS,CAAC+B,IAAI,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAA/B,QAAA,cAC9D9B,IAAA,SAAMyF,QAAQ,CAAC,SAAS,CAAC3B,CAAC,CAAC,oMAAoM,CAAC4B,QAAQ,CAAC,SAAS,CAAC,CAAC,CACjP,CAAC,CACA,CAAC,EACN,CAAC,CACH,CAAC,cAENxF,KAAA,QAAK2B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB9B,IAAA,OAAI6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+BAAmB,CAAI,CAAC,cAEnE5B,KAAA,QAAK2B,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC7E5B,KAAA,WACE8D,KAAK,CAAEwC,YAAY,CAACE,aAAc,CAClCzC,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEE,aAAa,CAAExC,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACnFnC,SAAS,CAAC,qFAAqF,CAAAC,QAAA,eAE/F9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQgE,KAAK,CAAC,GAAG,CAAAlC,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC5B,CAAC,EACN,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,MAAI,CAAO,CAAC,cAC5E9B,IAAA,UACE+D,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAEwC,YAAY,CAACG,YAAa,CACjC1C,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEG,YAAY,CAAEzC,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAClFnC,SAAS,CAAC,qFAAqF,CAC/FyH,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,IAAI,CACT,CAAC,EACC,CAAC,cAENrJ,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACnF9B,IAAA,UACE+D,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEwC,YAAY,CAACI,mBAAoB,CACxC3C,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEI,mBAAmB,CAAE1C,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACzFnC,SAAS,CAAC,qFAAqF,CAChG,CAAC,EACC,CAAC,cAEN3B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAQ,CAAO,CAAC,cAChF9B,IAAA,UACE+D,IAAI,CAAC,KAAK,CACVC,KAAK,CAAEwC,YAAY,CAACO,iBAAkB,CACtC9C,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEO,iBAAiB,CAAE7C,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACvFnC,SAAS,CAAC,qFAAqF,CAChG,CAAC,EACC,CAAC,cAEN3B,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,mBAAiB,CAAO,CAAC,cACzF5B,KAAA,WACE8D,KAAK,CAAEwC,YAAY,CAACM,iBAAkB,CACtC7C,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEM,iBAAiB,CAAE5C,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CACvFnC,SAAS,CAAC,qFAAqF,CAAAC,QAAA,eAE/F9B,IAAA,WAAQgE,KAAK,CAAC,EAAE,CAAAlC,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cAC5C9B,IAAA,WAAQgE,KAAK,CAAC,WAAQ,CAAAlC,QAAA,CAAC,gCAA2B,CAAQ,CAAC,cAC3D9B,IAAA,WAAQgE,KAAK,CAAC,OAAO,CAAAlC,QAAA,CAAC,4BAA0B,CAAQ,CAAC,cACzD9B,IAAA,WAAQgE,KAAK,CAAC,OAAO,CAAAlC,QAAA,CAAC,2BAAyB,CAAQ,CAAC,EAClD,CAAC,EACN,CAAC,cAEN5B,KAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B9B,IAAA,UAAO6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,0BAAwB,CAAO,CAAC,cAChG9B,IAAA,aACEgE,KAAK,CAAEwC,YAAY,CAACK,qBAAsB,CAC1C5C,QAAQ,CAAGC,CAAC,EAAKuC,eAAe,CAAAtC,aAAA,CAAAA,aAAA,IAAKqC,YAAY,MAAEK,qBAAqB,CAAE3C,CAAC,CAACE,MAAM,CAACJ,KAAK,EAAC,CAAE,CAC3FnC,SAAS,CAAC,qFAAqF,CAC/F2D,IAAI,CAAC,GAAG,CACRnB,WAAW,CAAC,2CAA2C,CACxD,CAAC,EACC,CAAC,EACH,CAAC,cAENnE,KAAA,QAAK2B,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5C9B,IAAA,OAAI6B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iCAAqB,CAAI,CAAC,CACpEgE,OAAO,CAACR,GAAG,CAAC8C,IAAI,eACflI,KAAA,QAAmB2B,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACnE5B,KAAA,SAAA4B,QAAA,EAAOsG,IAAI,CAAChH,MAAM,CAAC,IAAE,CAACgH,IAAI,CAACC,QAAQ,EAAO,CAAC,cAC3CnI,KAAA,SAAA4B,QAAA,EAAM,GAAC,CAAC,CAACsG,IAAI,CAACf,MAAM,CAAGe,IAAI,CAACC,QAAQ,EAAEgB,cAAc,CAAC,CAAC,EAAO,CAAC,GAFtDjB,IAAI,CAAChB,EAGV,CACN,CAAC,cACFpH,IAAA,QAAK6B,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjD5B,KAAA,QAAK2B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClE9B,IAAA,SAAA8B,QAAA,CAAM,QAAM,CAAM,CAAC,cACnB5B,KAAA,SAAM2B,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,GAAC,CAACiH,KAAK,CAACM,cAAc,CAAC,CAAC,EAAO,CAAC,EAC7D,CAAC,CACH,CAAC,cAENrJ,IAAA,WACEsE,OAAO,CAAEoE,eAAgB,CACzB7G,SAAS,CAAC,0IAA0I,CAAAC,QAAA,CACrJ,kBAED,CAAQ,CAAC,cAGT9B,IAAA,WACEsE,OAAO,CAAEA,CAAA,GAAM,CACbpD,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEqF,YAAY,CAAC,CACtDtF,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEb,IAAI,CAAC,CACrCmI,KAAK,qBAAApF,MAAA,CAAoBmD,YAAY,CAACE,aAAa,iBAAArD,MAAA,CAAamD,YAAY,CAACG,YAAY,gBAAAtD,MAAA,CAAYmD,YAAY,CAACI,mBAAmB,wBAAAvD,MAAA,CAAiBmD,YAAY,CAACO,iBAAiB,MAAG,CAAC,CAC1L,CAAE,CACFlF,SAAS,CAAC,6FAA6F,CAAAC,QAAA,CACxG,gCAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}